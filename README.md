# 定制化QR插件

> 一款由 BunnY 制作的 SillyTavern 快捷输入扩展。

本插件为 SillyTavern 添加了一个功能强大、高度可定制化的浮动输入面板，旨在大幅提升角色扮演和日常交流的输入效率。

---

## ✨ 功能特性

* **完全可定制的功能模块**：自由添加、编辑、删除你需要的输入格式模块。
* **可自由拖拽的触发按钮**：胡萝卜 (`🥕`) 按钮可以拖拽到屏幕的任何位置，并自动记忆位置。
* **智能面板定位**：输入面板会自动出现在胡萝卜按钮旁边，而不是固定在屏幕角落。
* **内置多种格式类型**：支持简单的单行文本、包含次级选项的文本、以及双输入的语音格式。
* **强大的表情包管理**：支持多分类管理，自由增删表情包，并可删除整个分类。
* **Emoji 快捷选择**：集成完整的Emoji选择器，方便快速插入表情符号。
* **配置自动保存**：你对模块的所有自定义配置和按钮位置，都会自动保存在浏览器本地，无需重复设置。

---

## 🚀 安装方法

本插件推荐使用**手动安装**方式，可以绕过所有网络问题。

1.  下载本插件的完整文件夹 `carrot-input-panel`。
2.  找到你的 SillyTavern 安装目录。
3.  进入 `public/extensions/` 文件夹。
4.  将 `carrot-input-panel` **整个文件夹** 放入 `extensions` 目录中。
    * 完成后请检查路径，应为：`.../SillyTavern/public/extensions/carrot-input-panel/manifest.json`
5.  **完全重启** SillyTavern。
6.  进入SillyTavern界面，在右侧菜单栏的“扩展(Extensions)”中，找到“兔子不吃胡萝卜”并启用它。
7.  刷新网页，即可看到 `🥕` 图标。

---

## 📖 使用方法

### 基本使用

* **打开/关闭面板**：点击屏幕上的 `🥕` 图标，即可在按钮旁打开或关闭主输入面板。
* **移动按钮**：在电脑上用鼠标按住 `🥕` 图标，或在手机上用手指按住，即可将其拖拽到屏幕的任何位置。松开后位置会自动保存。

### 模块定制与管理 (核心功能)

通过面板右下角的 `⚙️` **设置**按钮，你可以完全控制所有的功能模块。

#### 添加新模块

1.  点击 `⚙️` 按钮，打开“模块管理”窗口。
2.  点击【添加新模块】按钮。
3.  在弹出的窗口中填写：
    * **名称**：它将作为新的标签页显示在面板上（例如：“内心独白”）。
    * **类型**：
        * `简单文本`：最常用的类型，只有一个输入框。
        * `语音`：会创建两个输入框，分别对应时长和内容。
    * **格式**：定义最终插入的文本格式。请使用 `{content}`、`{duration}`、`{message}` 作为变量占位符。
        * 例如，为“内心独白”设置格式：`（{content}）`
        * 例如，自定义一种新的语音格式：`*{duration}s*::{message}`
4.  点击【保存】。新的模块会立刻出现在你的面板上。

#### 编辑模块

1.  点击 `⚙️` 按钮。
2.  在模块列表中，找到你想修改的模块，点击其右侧的 `✏️` **编辑**图标。
3.  你可以修改模块的**名称**和**格式**。
    * *注意：为保证稳定，已创建模块的“类型”不可修改。*
4.  点击【保存】。

#### 删除模块

1.  点击 `⚙️` 按钮。
2.  找到你想要删除的自定义模块，点击其右侧的 `🗑️` **删除**图标。
3.  在弹出的确认框中确认即可。
    * *注意：“文字信息”、“语音”、“表情包”作为核心基础模块，不可删除，但它们的格式可以随时编辑。*

### 各模块使用说明

* **文字信息**：拥有“纯文本”、“图片”等多种次级格式，点击顶部的次级选项按钮即可切换。
* **语音**：需要分别输入时长（仅数字）和内容。
* **作弊模式 / 自定义模块**：直接输入内容即可。
* **表情包**：
    * 点击分类标签可切换表情包。
    * 点击分类标签旁的 `➕` 可为此分类批量添加表情包。
    * 点击分类标签旁的 `🗑️` 可删除整个分类。
    * 鼠标悬停在单个表情包图片上，点击右上角的 `×` 可删除该表情。
* **Emoji**：点击面板左下角的 `😊` 图标，会弹出完整的Emoji选择器。
* **撤回 / 插入**：面板右下角的通用功能按钮。插入后，大部分输入框会自动清空，方便连续输入。
